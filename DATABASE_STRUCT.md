# Структура базы данных #

Здесь приведено примерное описание используемой базы данных. 
Для получения подробной информации - используйте [файл экспорта][].

[файл экспорта]:https://github.com/bmstu-iu9/utp2019-8-chat/blob/master/database/9SpT1uQOyM.sql

## Таблицы ##

### users ###

Данные для авторизации.

| Имя   | Тип         | Комментарий   |
| ----- | ----------- | ------------- |
| id    | int(11)     | ID            |
| login | varchar(20) | Логин         |
| hash  | text        | Хэш пароля    |
| salt  | text        | Соль к паролю |

### users_data ###

Данные о пользователях.

| Имя         | Тип          | Комментарий              |
| ----------- | ------------ | ------------------------ |
| id          | int(11)      | ID                       |
| nickname    | varchar(20)  | Никнейм                  |
| permissions | tinyint(4)   | Битовая маска привилегий |
| avatar      | varchar(100) | Путь к файлу аватара     |
| meta        | json         | Метаданные               |

### chat ###

Данные о каналах.

| Имя     | Тип         | Комментарий                     |
| ------- | ----------- | ------------------------------- |
| chat_id | int(11)     | ID                              |
| name    | varchar(20) | Название                        |
| user_id | int(11)     | ID создателя (владельца) канала |
| meta    | json        | Метаданные                      |

### party ###

Данные о пользователях в каналах. Запись вида 2-3 означает что пользователь с id 3 добавлен в канал 2.

| Имя     | Тип     | Комментарий     |
| ------- | ------- | --------------- |
| chat_id | int(11) | ID канала       |
| user_id | int(11) | ID пользователя |

### messages ###

Таблица с сообщениями со всех каналов.

| Имя         | Тип        | Комментарий        |
| ----------- | ---------- | ------------------ |
| message_id  | bigint(20) | ID сообщения       |
| chat_id     | bigint(20) | ID канала          |
| user_id     | int(11)    | ID отправителя     |
| content     | text       | Текст сообщения    |
| date_create | datetime   | Времядата отправки |